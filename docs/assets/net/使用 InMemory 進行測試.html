<html>
<head>
  <title>使用 InMemory 進行測試</title>
  <basefont face="微軟正黑體" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308919 (zh-TW, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微軟正黑體;
      font-size: 14pt;
    }
  </style>
</head>
<body>
<a name="13288"/>

<div>
<span><div><div><br/></div><div>使用 InMemory 進行測試</div><div><br/></div><h2 style="margin: 32px 0px 12px; padding: 0px; font-size: 1.75rem; font-weight: bold; line-height: 1.3; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 1.75rem; font-weight: bold; line-height: 1.3; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">InMemory 不是關聯式資料庫</span></h2><div style="margin: 1rem 0px 0px; padding: 0px; overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">EF Core 資料庫提供者可能沒有關聯式資料庫。</span><span style="overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"> </span><span style="overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">InMemory 設計為一般用途的資料庫進行測試，而且不是模擬的關聯式資料庫。</span></div><div style="margin: 1rem 0px 0px; padding: 0px; overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">包括的一些範例：</span></div><div style="margin: 0px; padding: 0px; outline: 0px; list-style: disc outside none;"><span style="outline: 0px;">InMemory 可讓您將會違反參考完整性條件約束，關聯式資料庫中的資料儲存。</span></div><div style="margin: 0px; padding: 0px; outline: 0px; list-style: disc outside none;"><span style="outline: 0px;">如果您使用 DefaultValueSql(string) 屬性在模型中，這是關聯式資料庫 API，並對 InMemory 執行時，會有任何作用。</span></div><div style="margin: 0px; padding: 0px; outline: 0px; list-style: disc outside none;"><a href="https://docs.microsoft.com/zh-tw/ef/core/modeling/concurrency#timestamprow-version" style="outline: 0px; color: var(--primary-base); cursor: pointer; overflow-wrap: break-word;">透過時間戳記/資料列版本的並行存取</a><span style="outline: 0px;">(</span><span style="outline: 0px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; direction: ltr; background-color: var(--body-background-dark); border-radius: 3px; overflow-wrap: break-word;">[Timestamp]</span><span style="outline: 0px;">或</span><span style="outline: 0px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; direction: ltr; background-color: var(--body-background-dark); border-radius: 3px; overflow-wrap: break-word;">IsRowVersion</span><span style="outline: 0px;">) 不支援。</span><span style="outline: 0px;"> </span><span style="outline: 0px;">否</span><a href="https://docs.microsoft.com/dotnet/api/microsoft.entityframeworkcore.dbupdateconcurrencyexception" style="outline: 0px; color: var(--primary-base); cursor: pointer; overflow-wrap: break-word;">DbUpdateConcurrencyException</a><span style="outline: 0px;">如果完成的更新將會擲回使用舊的並行語彙基元。</span></div><div style="position: relative; border-radius: 6px; font-size: 16px; padding: 1rem; margin-top: 1rem; color: rgb(0, 0, 0); transition: height 0.5s ease-in 0s, opacity 0.5s ease-in 0s; overflow-wrap: break-word; word-break: break-word; border: 1px solid var(--success-background-glow-high-contrast); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: var(--success-background) !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; overflow-wrap: break-word; font-weight: bold; color: var(--success-dark);"><span style="max-width: 100%; overflow-wrap: break-word; font-weight: bold; color: var(--success-dark);"> </span><span style="max-width: 100%; overflow-wrap: break-word; font-weight: bold; color: var(--success-dark);">提示</span></div><div style="margin: 1rem 0px 0px; padding: 0px; max-width: 100%; overflow-wrap: break-word;"><span style="max-width: 100%; overflow-wrap: break-word;">有許多測試用途的這些差異會造成影響。</span><span style="max-width: 100%; overflow-wrap: break-word;"> </span><span style="max-width: 100%; overflow-wrap: break-word;">不過，如果您想要測試其行為與類似關聯式資料庫，則為 true 的項目，然後考慮使用</span><a href="https://docs.microsoft.com/zh-tw/ef/core/miscellaneous/testing/sqlite" style="max-width: 100%; overflow-wrap: break-word; color: var(--success-dark); cursor: pointer; outline: 0px; font-weight: bold; text-decoration: underline;">SQLite 記憶體中模式</a><span style="max-width: 100%; overflow-wrap: break-word;">。</span></div></div><div><br/></div><hr/><div><br/></div><h1 style="font-size: 2.5rem; margin: -10px 0px 0px; padding: 0px; font-weight: bold; line-height: 1.3; overflow-wrap: break-word; word-break: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 2.5rem; font-weight: bold; line-height: 1.3; overflow-wrap: break-word; word-break: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">使用 SQLite 進行測試</span></h1><div><br/></div><div style="margin: 1rem 0px 0px; padding: 0px; overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="overflow-wrap: break-word; color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">SQLite 具有記憶體中模式，可讓您使用 SQLite 撰寫測試針對關聯式資料庫，而不實際的資料庫作業的額外負荷。</span></div><div style="position: relative; border-radius: 6px; font-size: 16px; padding: 1rem; margin-top: 1rem; color: rgb(0, 0, 0); transition: height 0.5s ease-in 0s, opacity 0.5s ease-in 0s; overflow-wrap: break-word; word-break: break-word; border: 1px solid var(--success-background-glow-high-contrast); font-family: &quot;Segoe UI&quot;, SegoeUI, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, Tahoma, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: var(--success-background) !important;"><div style="margin: 0px; padding: 0px; max-width: 100%; overflow-wrap: break-word; font-weight: bold; color: var(--success-dark);"><span style="max-width: 100%; overflow-wrap: break-word; font-weight: bold; color: var(--success-dark);"> </span><span style="max-width: 100%; overflow-wrap: break-word; font-weight: bold; color: var(--success-dark);">提示</span></div><div style="margin: 1rem 0px 0px; padding: 0px; max-width: 100%; overflow-wrap: break-word;"><span style="max-width: 100%; overflow-wrap: break-word;">您可以檢視這篇文章</span><a href="https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/core/Miscellaneous/Testing" style="max-width: 100%; overflow-wrap: break-word; color: var(--success-dark); cursor: pointer; outline: 0px; font-weight: bold; text-decoration: underline;">範例</a><span style="max-width: 100%; overflow-wrap: break-word;">GitHub 上</span></div><div style="margin: 1rem 0px 0px; padding: 0px; max-width: 100%; overflow-wrap: break-word;"><span style="max-width: 100%; overflow-wrap: break-word;"><br/></span></div><hr/><div><br/></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 342px;"></col><col style="width: 394px;"></col></colgroup><tbody><tr><td style="width: 342px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt; font-family: &quot;Segoe UI&quot;;">使用 InMemory 進行測試</span></div></td><td style="width: 394px; padding: 8px; border: 1px solid;"><div><span style="font-size: 12pt; font-family: &quot;Segoe UI&quot;;">使用 </span><span style="font-size: 12pt; font-family: &quot;Segoe UI&quot;;">SQLite 進行測試</span></div><div><span style="font-size: 12pt; font-family: &quot;Segoe UI&quot;;"><br/></span></div></td></tr><tr><td style="width: 342px; padding: 8px; border: 1px solid;"><ul><li><div><span style="outline: 0px;">InMemory 可讓您將會違反參考完整性條件約束，關聯式資料庫中的資料儲存。</span></div></li><li><div><span style="outline: 0px;">如果您使用 DefaultValueSql(string) 屬性在模型中，這是關聯式資料庫 API，並對 InMemory 執行時，會有任何作用。</span></div></li><li><div><span style="font-size: 12pt; font-family: &quot;Segoe UI&quot;;">透過時間戳記/資料列版本的並行存取([Timestamp]或IsRowVersion) 不支援。 否DbUpdateConcurrencyException如果完成的更新將會擲回使用舊的並行語彙基元。</span></div></li></ul></td><td style="width: 394px; padding: 8px; border: 1px solid;"><ul><li><div>可以使用一般關聯式資料庫</div></li></ul></td></tr></tbody></table><div><br/></div></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>EF6</div><div><a href="https://docs.microsoft.com/zh-tw/ef/ef6/fundamentals/testing/mocking">https://docs.microsoft.com/zh-tw/ef/ef6/fundamentals/testing/mocking</a></div><div>EF Core</div><div><a href="https://docs.microsoft.com/zh-tw/ef/core/miscellaneous/testing/in-memory">https://docs.microsoft.com/zh-tw/ef/core/miscellaneous/testing/in-memory</a></div><div>effort</div><div><a href="https://entityframework-effort.net/">https://entityframework-effort.net/</a></div></div></span>
</div></body></html> 